/*! no-unsafe-inline 1.2.6-dev */
jQuery(document).ready(function(l){function n(n){for(var e,t=window.location.search.substring(1).split("&"),i=0;i<t.length;i+=1)if((e=t[i].split("="))[0]===n)return void 0===e[1]||decodeURIComponent(e[1]);return!1}n("page"),n("tab");var a,e,i,t,o,s=l("table.nunil-ext-sources tbody");let r=wp.i18n.__;function p(n){for(var n=n.split(" "),e=Array.from(new Set(n)),t=[],i=0;i<e.length;i+=1)"'self'"===e[i]&&(t.push("'self'"),e.splice(i,1));for(i=0;i<e.length;i+=1)"http:"===e[i]&&(t.push("http:"),e.splice(i,1));for(i=0;i<e.length;i+=1)"https:"===e[i]&&(t.push("https:"),e.splice(i,1));for(i=0;i<e.length;i+=1)"data:"===e[i]&&(t.push("data:"),e.splice(i,1));for(i=0;i<e.length;i+=1)"mediastream:"===e[i]&&(t.push("mediastream:"),e.splice(i,1));for(i=0;i<e.length;i+=1)"blob:"===e[i]&&(t.push("blob:"),e.splice(i,1));for(i=0;i<e.length;i+=1)"filesystem:"===e[i]&&(t.push("filesystem:"),e.splice(i,1));for(e.sort(),i=0;i<e.length;i+=1)t.push(e[i]);return t.join(" ")}function u(n){var e,t=void 0!==performance&&performance.now?(e=(performance.now()+performance.timing.navigationStart)/1e3,1e6):(e=(Date.now?Date.now():(new Date).getTime())/1e3,1e3);return n?e:(n=0|e,Math.round((e-n)*t)/t+" "+n)}function d(n){l.ajax({complete:function(){l("input[type='checkbox'][name='no-unsafe-inline-tools[capture_enabled]']").prop("checked")?void 0===n&&setTimeout(d,25e3):clearTimeout(d)},data:{action:"nunil_update_summary_tables"},dataType:"json",success:function(n){var i="",a="",o="",s="";l.each(n,function(n,e){"global"===n&&l.each(e,function(n,e){var t="";i=(i+="<tr>")+'<td data-th="'+r("Type","no-unsafe-inline")+'">'+e.type+"</td>",t="1"===e.whitelist?r("WL","no-unsafe-inline"):r("BL","no-unsafe-inline"),i=(i=(i+='<td data-th="'+r("Whitelist","no-unsafe-inline")+'">'+t+"</td>")+'<td data-th="'+r("Num.","no-unsafe-inline")+'">'+e.num+"</td>")+'<td data-th="'+r("Num. Clusters","no-unsafe-inline")+'">'+e.clusters+"</td></tr>"}),"inline"===n&&l.each(e,function(n,e){var t="";o=(o=(o=(o+="<tr>")+'<td data-th="'+r("Directive","no-unsafe-inline")+'">'+e.directive+"</td>")+'<td data-th="'+r("Tagname","no-unsafe-inline")+'">'+e.tagname+"</td>")+'<td data-th="'+r("Cluster","no-unsafe-inline")+'">'+e.clustername+"</td>",t="1"===e.whitelist?r("WL","no-unsafe-inline"):r("BL","no-unsafe-inline"),o=(o+='<td data-th="'+r("Whitelist","no-unsafe-inline")+'">'+t+"</td>")+'<td data-th="'+r("Num.","no-unsafe-inline")+'">'+e.num+"</td></tr>"}),"external"===n&&l.each(e,function(n,e){var t="";switch(a=(a=(a=(a+="<tr>")+('<td data-th="'+r("Directive","no-unsafe-inline")+'">'+e.directive+"</td>"))+('<td data-th="'+r("Tagname","no-unsafe-inline")+'">'+e.tagname+"</td>"))+('<td data-th="'+r("Nonceable","no-unsafe-inline")+'">'+e.nonceable+"</td>"),e.whitelist){case"1":t=r("WL","no-unsafe-inline");break;case"0":t=r("BL","no-unsafe-inline");break;default:t="--"}a=(a+='<td data-th="'+r("Whitelist","no-unsafe-inline")+'">'+t+"</td>")+'<td data-th="'+r("Num.","no-unsafe-inline")+'">'+e.num+"</td></tr>"}),"events"===n&&l.each(e,function(n,e){var t="";s=(s=(s=(s+="<tr>")+'<td data-th="'+r("Tagname","no-unsafe-inline")+'">'+e.tagname+"</td>")+'<td data-th="'+r("Event Attribute","no-unsafe-inline")+'">'+e.event_attribute+"</td>")+'<td data-th="'+r("Cluster","no-unsafe-inline")+'">'+e.clustername+"</td>",t="1"===e.whitelist?r("WL","no-unsafe-inline"):r("BL","no-unsafe-inline"),s=(s+='<td data-th="'+r("Whitelist","no-unsafe-inline")+'">'+t+"</td>")+'<td data-th="'+r("Num.","no-unsafe-inline")+'">'+e.num+"</td></tr>"})}),l("#nunil_db_summary_body").html(i),l("#nunil_external_table_summary_body").html(a),l("#nunil_inline_table_summary_body").html(o),l("#nunil_eventhandlers_table_summary_body").html(s)},type:"post",url:nunil_object.ajax_url})}function c(n){if(n&&""!==n)return"https:"===(n=new URL(n)).protocol||"localhost"===(n=n.hostname)||"127.0.0.1"===n||"::1"===n}function f(n){if(""!==n)return"string"==typeof n&&/^[!#$%&'*+\-.^_`|~A-Za-z0-9]+$/.test(n)}l.fn.extend({clearText:function(){return this.clone().children().remove().end().text()}}),l.fn.serialtabs=function(n){let o=l.extend({},l.fn.serialtabs.defaults,n),s=this;return l.extend(this,{init:function(){let t=o.event+".serialtabs";var n=o.fxIn;o.fxIn="show",this.each(function(){let i=l(this);var n=o.getTrigger(i),e=n.filter(".is-current");if("auto"==o.mode){let t=!1;l(window).on("resize.serialtabs",function(n,e){!1!==t&&clearTimeout(t),t=setTimeout(function(){s.handleResize(i)},25)}),s.handleResize(i)}else i.attr("data-serialtabs-mode",o.mode);"tabs"==i.attr("data-serialtabs-mode")&&0==e.length&&n.first().addClass("is-current"),n.not(".is-current").each(function(){var n=l(this);o.getTarget(n).hide()}),n.on(t,function(n){var e=l(this);if(s.handleEvent(e,i),"A"==n.target.tagName)return!0})}),o.fxIn=n},handleEvent:function(n,e){var t=o.getTarget(n),i=o.getTrigger(e).filter(".is-current"),a=o.getTarget(i);"tabs"==e.attr("data-serialtabs-mode")&&n.is(i)||(i&&s.display(i,a,!1),n.is(i))||s.display(n,t,!0)},display:function(n,e,t){n[t?"addClass":"removeClass"]("is-current"),e[t?o.fxIn:o.fxOut](),t&&(e=n.find("[type=radio]")).length&&e.prop("checked",!0)},getTrigger:function(n){let e;return"string"==typeof o.trigger?e=n.find(o.trigger):"function"==typeof o.trigger&&(e=o.trigger(n)),l(e)},getTarget:function(n){let e;return"string"==typeof o.target?e=n.attr(o.target):"function"==typeof o.target&&(e=o.target(n)),l(e)},handleResize:function(n){var e=s.isResponsive(n);n.attr("data-serialtabs-mode",e?"accordion":"tabs"),s.moveItems(n,e)},isResponsive:function(n){let e=n.data("serialtabs-breakpoint")?n.data("serialtabs-breakpoint"):50;return 50==e&&n.children().each(function(){e+=l(this).outerWidth()}),n.data("serialtabs-breakpoint",e),n.parent().width()<e},moveItems:function(t,i){o.getTrigger(t).each(function(){var n=l(this),e=o.getTarget(n);i?e.insertAfter(n):e.insertAfter(t)})}}),this.init(),this},l.fn.serialtabs.defaults={mode:"auto",event:"click",getTrigger:function(n){return n.find("[data-serialtabs]")},getTarget:function(n){return l(n.data("serialtabs"))},fxIn:"slideDown",fxOut:"slideUp"},l.fn.checkOneAtLeast=function(n){var e=!1;return l(n).each(function(){l(this).prop("checked")&&(e=!0)}),!1===e&&(l(n)[0].prop("checked",!0),l(n)[0].trigger("change")),this};var _=l("#nunil_logs_per_page").val()||50;function h(n,e,t,i){navigator.clipboard.writeText(n).then(()=>{void 0===t&&(t="Copied to clipboard"),(e=void 0===e?!0:e)&&m(t,i)}).catch(n=>{console.error("Failed to copy text: ",n)})}function m(n,e=l("#nunil_tools_operation_report_container")){var t=l("div.copy-notification");0==t.length&&(t=l("<div/>",{class:"ui-tooltip ui-corner-all ui-widget-shadow ui-widget ui-widget-content copy-notification",text:n}),e.append(t),t.fadeIn("slow",function(){setTimeout(function(){t.fadeOut("slow",function(){t.remove()})},1e3)}))}i={display:function(){l.ajax({beforeSend:function(){l("#nunil-spinner-blocks").removeClass("hidden")},complete:function(){l("#nunil-spinner-blocks").addClass("hidden")},data:{_ajax_nunil_logs_nonce:l("#_ajax_nunil_logs_nonce").val(),action:"nunil_display_logs",per_page:_},dataType:"json",error:function(n){console.error("Response: ",n)},screen_id:l("#screen_id").val(),success:function(n){n=l.parseJSON(n.data);l("#nunil-log-table").html(n.display),l("tbody").on("click",".toggle-row",function(n){n.preventDefault(),l(this).closest("tr").toggleClass("is-expanded")}),i.init(),l("#message-search-input").prop("placeholder",l("#search-submit").val()),l("#search-submit").remove()},url:nunil_object.ajax_url,type:"get"})},init:function(){var t;l(".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a").on("click",function(n){n.preventDefault();n=this.search.substring(1),n={paged:i.__query(n,"paged")||"1",order:i.__query(n,"order")||"desc",orderby:i.__query(n,"orderby")||"created_at","nunil-log-date":l("select[name=nunil-log-date]").val()||"","nunil-log-level":l("select[name=nunil-log-level]").val()||"",s:l("input[name=s]").val()||"",nunil_logs_per_page:l("input[name=nunil_logs_per_page]").val()||"50"};i.update(n)}),l("input[name=paged]").off("keyup").on("keyup",function(n){13==n.which&&n.preventDefault();var e={paged:parseInt(l("input[name=paged]").val())||"1",order:l("input[name=order]").val()||"desc",orderby:l("input[name=orderby]").val()||"created_at","nunil-log-date":l("select[name=nunil-log-date]").val()||"","nunil-log-level":l("select[name=nunil-log-level]").val()||"",s:l("input[name=s]").val()||"",nunil_logs_per_page:l("input[name=nunil_logs_per_page]").val()||"50"};window.clearTimeout(t),t=window.setTimeout(function(){i.update(e)},500)}),l("select[name=nunil-log-date]").off("change").on("change",function(n){n.preventDefault();var e={paged:parseInt(l("input[name=paged]").val())||"1",order:l("input[name=order]").val()||"desc",orderby:l("input[name=orderby]").val()||"created_at","nunil-log-date":l(this).val()||"","nunil-log-level":l("select[name=nunil-log-level]").val()||"",s:l("input[name=s]").val()||"",nunil_logs_per_page:l("input[name=nunil_logs_per_page]").val()||"50"};window.clearTimeout(t),t=window.setTimeout(function(){i.update(e)},500)}),l("select[name=nunil-log-level]").off("change").on("change",function(n){n.preventDefault();var e={paged:parseInt(l("input[name=paged]").val())||1,order:l("input[name=order]").val()||"desc",orderby:l("input[name=orderby]").val()||"created_at","nunil-log-date":l("select[name=nunil-log-date]").val()||"","nunil-log-level":l(this).val()||"",s:l("input[name=s]").val()||"",nunil_logs_per_page:l("input[name=nunil_logs_per_page]").val()||"50"};window.clearTimeout(t),t=window.setTimeout(function(){i.update(e)},500)}),l("input[name=s]").off("change").on("change",function(n){n.preventDefault();var e={paged:parseInt(l("input[name=paged]").val())||"1",order:l("input[name=order]").val()||"desc",orderby:l("input[name=orderby]").val()||"created_at","nunil-log-date":l("select[name=nunil-log-date]").val()||"","nunil-log-level":l("select[name=nunil-log-level]").val()||"",s:l("input[name=s]").val()||"",nunil_logs_per_page:l("input[name=nunil_logs_per_page]").val()||"50"};window.clearTimeout(t),t=window.setTimeout(function(){i.update(e)},500)}),l("#nunil-logs-form").on("submit",function(n){n.preventDefault()})},update:function(n){l.ajax({beforeSend:function(){l("#nunil-spinner-blocks").removeClass("hidden")},complete:function(){l("#nunil-spinner-blocks").addClass("hidden")},data:l.extend({_ajax_nunil_logs_nonce:l("#_ajax_nunil_logs_nonce").val(),action:"nunil_fetch_logs",per_page:_},n),dataType:"json",error:function(n){console.error("Response: ",n)},success:function(n){n=l.parseJSON(n.data);n.rows.length&&l("#the-list").html(n.rows),n.column_headers.length&&l("thead tr, tfoot tr").html(n.column_headers),n.pagination.bottom.length&&l(".tablenav.top .tablenav-pages").html(l(n.pagination.top).html()),n.pagination.top.length&&l(".tablenav.bottom .tablenav-pages").html(l(n.pagination.bottom).html()),i.init()},url:nunil_object.ajax_url,type:"get"})},__query:function(n,e){for(var t=n.split("&"),i=0;i<t.length;i++){var a=t[i].split("=");if(a[0]==e)return a[1]}return!1}},l("#nunil-help-link").on("click",function(){l("#contextual-help-link").click()}),l("#cb-select-all-1").on("click",function(){l(":checkbox[name*='bulk-select[]']").prop("checked",this.checked).change()}),l("#nunil-db-sum-tabs-5").on("mouseenter",function(){l("#nunil_tools_operation_report_buttons").stop(!0).fadeIn(600)}),l("#nunil-db-sum-tabs-5").on("mouseleave",function(){l("#nunil_tools_operation_report_buttons").stop(!0).fadeOut(600)}),l("#nunil_tools_operation_report_button_clipboard").tooltip({position:{at:"right center",my:"left+15 center"}}),l("#nunil_tools_operation_report_button_clear").tooltip({position:{at:"right center",my:"left+15 center"}}),l("#nunil_tools_operation_report_button_clipboard").on("click",function(n){n.preventDefault(),h((n=document.getElementById("nunil_tools_operation_report")).innerText||n.textContent,!0,l(this).data("notification"),l("#nunil_tools_operation_report_container"))}),l("#nunil_tools_operation_report_button_clear").on("click",function(n,e=l(this).data("notification"),t=l(this).data("dialog-message")){n.preventDefault();var i=l("div.nunil-tools-dialog"),i=l("<div/>",{class:"nunil-tools-dialog",text:t});l("#nunil_tools_operation_report_container").append(i),l(".nunil-tools-dialog").dialog({buttons:{Ok:function(){l(this).dialog("close"),i.remove(),l("#nunil_tools_operation_report").text(""),m(e,l("#nunil_tools_operation_report_container"))},Cancel:function(){l(this).dialog("close"),i.remove()}},dialogClass:"no-titlebar",height:"auto",modal:!0,resizable:!1})});if(l("#nunil-support-box-accordion").accordion({collapsible:!0,heightStyle:"content",icons:{header:"ui-icon-circle-arrow-e",activeHeader:"ui-icon-circle-arrow-s"},active:!1}),l("#nunil_sys_info_box_container").on("mouseenter",function(){l("#nunil_admin_support_box_buttons").stop(!0).fadeIn(600)}),l("#nunil_sys_info_box_container").on("mouseleave",function(){l("#nunil_admin_support_box_buttons").stop(!0).fadeOut(600)}),l("#nunil_admin_support_box_button_clipboard").tooltip({position:{at:"right center",my:"left+15 center"}}),l("#nunil_admin_support_box_button_clipboard").on("click",function(n){n.preventDefault(),h((n=document.getElementById("nunil_sys_info_box")).innerText||n.textContent,!0,l(this).data("notification"),l("#nunil_sys_info_box_container"))}),t=n("page"),o=n("tab"),s=l("table.nunil-ext-sources tbody"),"no-unsafe-inline"===t&&"base-rule"===o){let a=[],t=[];l("input[type='checkbox'][name*='bulk-select[]']").on("change",function(){var n=l(this),e=n.parent().parent().find("td:nth-child(2)").clearText(),t=n.parent().parent().find("td:nth-child(3)").clearText(),e="no-unsafe-inline-base-rule\\["+e+"_base_rule\\]";n.prop("checked")?l("#"+e).val(l("#"+e).val()+" "+t):l("#"+e).val(l("#"+e).val().replace(t,"")),l("#"+e).val(p(l("#"+e).val().trim()))}),s.find("tr").each(function(n,e){l(e).find("td").each(function(n,e){e=l(e).clearText();t.push(e)}),a.push([t[0],t[1]]),t.length=0}),["base-uri","default-src","script-src","style-src","font-src","img-src","frame-src","media-src","object-src","connect-src","manifest-src","worker-src","form-action"].forEach(function(i){l("#"+("no-unsafe-inline-base-rule\\["+i+"_base_rule\\]")).val().split(" ").forEach(function(t){a.forEach(function(n,e){n[0]===i&&n[1]===t&&l("input[type='checkbox'][name*='bulk-select[]'][value='"+(e+1)+"']").prop("checked",!0)})})})}function b(e){if(void 0!==e){var t,e=e.split(" "),i=Array.from(new Set(e)),a=[];let n=!1;for(t=0;t<i.length;t+=1)"'none'"===i[t]&&(a.push("'none'"),i.splice(t,1));for(t=0;t<i.length;t+=1)"default"===i[t]&&(a.push("default"),i.splice(t,1));for(t=0;t<i.length;t+=1)"'allow-duplicates'"!==i[t]?a.push(i[t]):n=!0;return n&&a.push("'allow-duplicates'"),a.join(" ")}}if("no-unsafe-inline"!==t||"inline"!==o&&"events"!==o||(e={active:!1,animation:200,autoHeight:!1,classes:{"ui-accordion-content":"hljs"},collapsible:!0,heightStyle:"content"},l("div[class^='code-accordion-']").each(function(){l(this).accordion(e)}),l("div[class^='pages-accordion-']").each(function(){l(this).accordion(e)})),a=l("#nunil-endpoints-list li").length,l("input[type='text'][name='no-unsafe-inline[max_response_header_size]']").spinner({classes:{"ui-spinner":"highlight"},max:24576,min:512,numberFormat:"n",page:5,step:512}),l("[id^=nunil-options-tabs-").addClass("serialtabs-nav-content"),l(".serialtabs-nav > li").addClass("sub-link-1"),l(".serialtabs-nav").serialtabs(),"no-unsafe-inline"===t&&"settings"===o&&(l("input[type='checkbox'][name='no-unsafe-inline[sri_script]']").on("change",function(){l(this).prop("checked")&&!1===l("input[type='checkbox'][name='no-unsafe-inline[sri_sha256]']").prop("checked")&&!1===l("input[type='checkbox'][name='no-unsafe-inline[sri_sha384]']").prop("checked")&&!1===l("input[type='checkbox'][name='no-unsafe-inline[sri_sha512]']").prop("checked")&&l("input[type='checkbox'][name='no-unsafe-inline[sri_sha256]']").prop("checked",!0)}),l("input[type='checkbox'][name='no-unsafe-inline[sri_link]']").on("change",function(){l(this).prop("checked")&&!1===l("input[type='checkbox'][name='no-unsafe-inline[sri_sha256]']").prop("checked")&&!1===l("input[type='checkbox'][name='no-unsafe-inline[sri_sha384]']").prop("checked")&&!1===l("input[type='checkbox'][name='no-unsafe-inline[sri_sha512]']").prop("checked")&&l("input[type='checkbox'][name='no-unsafe-inline[sri_sha256]']").prop("checked",!0)}),l("input[type='checkbox'][name='no-unsafe-inline[use_reports]']").prop("checked")||(l("input[type='checkbox'][name='no-unsafe-inline[use_report-uri]']").prop("disabled",!0),l("input[type='checkbox'][name='no-unsafe-inline[use_report-to]']").prop("disabled",!0),l("input[type='checkbox'][name='no-unsafe-inline[add_Report-To]']").prop("disabled",!0),l("input[type='checkbox'][name='no-unsafe-inline[add_Reporting-Endpoints]']").prop("disabled",!0),l("input[type='text'][name='no-unsafe-inline[group_name]']").prop("disabled",!0),l("input[type='text'][name='no-unsafe-inline[max_age]']").prop("disabled",!0),l("input[type='button'][name='no-unsafe-inline[add_new_endpoint]']").prop("disabled",!0),l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").prop("disabled",!0),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").prop("disabled",!0),l(".nunil-btn-del-endpoint").prop("disabled",!0),l(".nunil-hidden-endpoint").prop("disabled",!0),l(".nunil-endpoint-string").removeClass("txt-active"),l(".nunil-endpoint-string-unsaved").removeClass("txt-active-unsaved"),l(".nunil-endpoint-string").addClass("txt-inactive"),l(".nunil-endpoint-string-unsaved").addClass("txt-inactive")),l("input[type='checkbox'][name='no-unsafe-inline[use_reports]']").on("change",function(){l(this).prop("checked")?(l("input[type='checkbox'][name='no-unsafe-inline[use_report-uri]']").prop("disabled",!1),l("input[type='checkbox'][name='no-unsafe-inline[use_report-to]']").prop("disabled",!1),l("input[type='checkbox'][name='no-unsafe-inline[add_Report-To]']").prop("disabled",!1),l("input[type='checkbox'][name='no-unsafe-inline[add_Reporting-Endpoints]']").prop("disabled",!1),l("input[type='text'][name='no-unsafe-inline[group_name]']").prop("disabled",!1),l("input[type='text'][name='no-unsafe-inline[max_age]']").prop("disabled",!1),l("input[type='button'][name='no-unsafe-inline[add_new_endpoint]']").prop("disabled",!1),l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").prop("disabled",!1),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").prop("disabled",!1),l(".nunil-btn-del-endpoint").prop("disabled",!1),l(".nunil-hidden-endpoint").prop("disabled",!1),l(".nunil-endpoint-string").removeClass("txt-inactive"),l(".nunil-endpoint-string-unsaved").removeClass("txt-inactive"),l(".nunil-endpoint-string").addClass("txt-active"),l(".nunil-endpoint-string-unsaved").addClass("txt-active-unsaved"),l.fn.checkOneAtLeast([l("input[type='checkbox'][name='no-unsafe-inline[use_report-to]']"),l("input[type='checkbox'][name='no-unsafe-inline[use_report-uri]']")])):(l("input[type='checkbox'][name='no-unsafe-inline[use_report-uri]']").prop("disabled",!0),l("input[type='checkbox'][name='no-unsafe-inline[use_report-to]']").prop("disabled",!0),l("input[type='checkbox'][name='no-unsafe-inline[add_Report-To]']").prop("disabled",!0),l("input[type='checkbox'][name='no-unsafe-inline[add_Reporting-Endpoints]']").prop("disabled",!0),l("input[type='text'][name='no-unsafe-inline[group_name]']").prop("disabled",!0),l("input[type='text'][name='no-unsafe-inline[max_age]']").prop("disabled",!0),l("input[type='button'][name='no-unsafe-inline[add_new_endpoint]']").prop("disabled",!0),l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").prop("disabled",!0),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").prop("disabled",!0),l(".nunil-btn-del-endpoint").prop("disabled",!0),l(".nunil-hidden-endpoint").prop("disabled",!0),l(".nunil-endpoint-string").removeClass("txt-active"),l(".nunil-endpoint-string-unsaved").removeClass("txt-active-unsaved"),l(".nunil-endpoint-string").addClass("txt-inactive"))}),l("input[type='checkbox'][name='no-unsafe-inline[use_report-to]']").on("change",function(){l(this).prop("checked")&&l.fn.checkOneAtLeast([l("input[type='checkbox'][name='no-unsafe-inline[add_Reporting-Endpoints]']"),l("input[type='checkbox'][name='no-unsafe-inline[add_Report-To]']")])}),l("#nunil-endpoints-list").on("click",".nunil-btn-del-endpoint",function(){var n=l(this).closest("li").clone(!0);n.children("button").removeClass("nunil-btn-del-endpoint").addClass("nunil-btn-restore-endpoint"),n.children("button").children("span.dashicons-remove").addClass("dashicons-plus-alt").removeClass("dashicons-remove"),n.children("button span").addClass("dashicons-plus-alt").removeClass("dashicons-remove"),n.children("span.txt-active-unsaved").addClass("txt-inactive-unsaved").removeClass("txt-active-unsaved"),n.children("span.txt-active").addClass("txt-inactive").removeClass("txt-active"),n.children("input[type='hidden']").each(function(){var n=l(this).attr("name"),n=(l(this).attr("name",n.replace(/\[endpoints\]/,"[endpoints_deleted]")),l(this).attr("id"));l(this).attr("id",n.replace(/\[endpoints\]/,"[endpoints_deleted]"))}),l(this).closest("li").remove(),l("#nunil-endpoints-list").append(n)}),l("#nunil-endpoints-list").on("click",".nunil-btn-restore-endpoint",function(){var n=l(this).closest("li").clone(!0);n.children("button").removeClass("nunil-btn-restore-endpoint").addClass("nunil-btn-del-endpoint"),n.children("button").children("span.dashicons-plus-alt").addClass("dashicons-remove").removeClass("dashicons-plus-alt"),n.children("button span.dashicons-plus-alt").addClass("dashicons-remove").removeClass("dashicons-plus-alt"),n.children("span.txt-inactive-unsaved").addClass("txt-active-unsaved").removeClass("txt-inactive-unsaved"),n.children("span.txt-inactive").addClass("txt-active").removeClass("txt-inactive"),n.children("input[type='hidden']").each(function(){var n=l(this).attr("name"),n=(l(this).attr("name",n.replace(/\[endpoints_deleted\]/,"[endpoints]")),l(this).attr("id"));l(this).attr("id",n.replace(/\[endpoints_deleted\]/,"[endpoints]"))}),l(this).closest("li").remove(),l("#nunil-endpoints-list").append(n)}),l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").on("focus",function(){l(this).removeClass("nunil-error-input")}),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").on("focus",function(){l(this).removeClass("nunil-error-input")}),l("input[type='button'][name='no-unsafe-inline[add_new_endpoint]']").on("click",function(){var n,e,t,i;c(l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").val())?(0===a?(l("input[type='text'][name='no-unsafe-inline[group_name]']").effect("highlight","slow"),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").effect("highlight","slow"),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").prop("disabled",!0),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").val(l("input[type='text'][name='no-unsafe-inline[group_name]']").val().trim())):l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").prop("disabled",!1),f(l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").val())&&(t=l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").val(),i=!0,l("input[type='hidden'][name^='no-unsafe-inline[endpoints]'][name$='[name]']").each(function(){if(t===l(this).val())return i=!1,l(this).prev().effect("highlight","slow"),!1}),i)?c(l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").val())&&f(l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").val())&&(0==l("#nunil-endpoints-list li").length&&l("#nunil-endpoints-list").append('<li><span class="nunil-btn nunil-btn-endpoint-list"><span class="dashicons dashicons-editor-ul"></span></span><span class="nunil-endpoint-string"><b>'+r("endpoint URL","no-unsafe-inline")+'</b></span><span class= "nunil-endpoint-string"><b>'+r("endpoint name","no-unsafe-inline")+"</b></span></li>"),n=l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").val().trim(),e=l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").val().trim(),e=0===a?'<span class="nunil-endpoint-string-unsaved-disabled txt-active-unsaved txt-newly">'+l("input[type='text'][name='no-unsafe-inline[group_name]']").val().trim()+'</span><input class="nunil-hidden-endpoint" type="hidden" id="no-unsafe-inline[endpoints]['+a+'][name]"name="no-unsafe-inline[endpoints]['+a+'][name]" value="'+l("input[type='text'][name='no-unsafe-inline[group_name]']").val().trim()+'" />':'<span class="nunil-endpoint-string-unsaved-disabled txt-active-unsaved txt-newly">'+e+'</span><input class="nunil-hidden-endpoint" type="hidden" id="no-unsafe-inline[endpoints]['+a+'][name]"name="no-unsafe-inline[endpoints]['+a+'][name]" value="'+e+'" />',l("#nunil-endpoints-list").append('<li><button  class="nunil-btn nunil-btn-del-endpoint" id="no-unsafe-inline[del-endpoint]['+a+']" name="no-unsafe-inline[del-endpoint]['+a+']" value="&#x2425;"><span class="dashicons dashicons-remove"> </span></button><span class="nunil-endpoint-string-unsaved txt-active-unsaved txt-newly">'+n+'</span><input class="nunil-hidden-endpoint" type="hidden" id="no-unsafe-inline[endpoints]['+a+'][url]"name="no-unsafe-inline[endpoints]['+a+'][url]" value="'+n+'" />'+e+"</li>"),l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").val(""),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").prop("disabled",!1),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").val(""),l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").removeClass("nunil-error-input"),l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").removeClass("nunil-error-input"),a+=1):l("input[type='text'][name='no-unsafe-inline[new_endpoint_name]']").addClass("nunil-error-input")):l("input[type='text'][name='no-unsafe-inline[new_endpoint]']").addClass("nunil-error-input")})),"no-unsafe-inline"===t&&"settings"===o){s=l("#no-unsafe-inline\\[trusted-types\\]").val();if(void 0!==s){let e=s.split(" ");"'none' 'allow-duplicates'".split(" ").forEach(function(n){-1!==e.indexOf(n)&&l(`input.no-unsafe-inline-trusted-type-builder[value="${n}"]`).prop("checked",!0)})}function v(){l("input[type='checkbox'][name='no-unsafe-inline[use_trusted-types]']").prop("checked")?(l("#no-unsafe-inline\\[trusted-types\\]").prop("disabled",!1),l("checkbox[id='no-unsafe-inline_trusted-types_none']").prop("disabled",!1),l("checkbox[id='no-unsafe-inline_trusted-types_allow-duplicates']").prop("disabled",!1),l("#nunil-trusted-types-container").fadeTo(1e3,1)):(l("#no-unsafe-inline\\[trusted-types\\]").prop("disabled",!0),l("checkbox[id='no-unsafe-inline_trusted-types_none']").prop("disabled",!0),l("checkbox[id='no-unsafe-inline_trusted-types_allow-duplicates']").prop("disabled",!0),l("#nunil-trusted-types-container").fadeTo(1e3,.5))}v(),l("input[type='checkbox'][name='no-unsafe-inline[use_trusted-types]']").on("change",function(){v()})}l(".no-unsafe-inline-trusted-type-builder").on("change",function(){var n=l(this),e=n.val(),t=l("#no-unsafe-inline\\[trusted-types\\]");n.prop("checked")?(n=t.val().trim()+" "+e,t.val(n)):t.val(t.val().replace(e,"")),t.val(b(t.val()))}),l("#nunil-db-sum-tabs").tabs({active:!1,classes:{"ui-tabs":"ui-corner-none","ui-tabs-nav":"ui-corner-none","ui-tabs-panel":"ui-corner-none","ui-tabs-tab":"ui-corner-none"},collapsible:!0}),l("#nunil_trigger_clustering").on("click",function(n){var e=l("#clustering_nonce").val();n.preventDefault(),l("#nunil_trigger_clustering").prop("disabled",!0),l.ajax({beforeSend:function(){l("#nunil-spinner-blocks").removeClass("hidden")},complete:function(){l("#nunil-spinner-blocks").addClass("hidden")},data:{action:"nunil_trigger_clustering",nonce:e},dataType:"json",success:function(n){"success"===n.type?(l("div#nunil_tools_operation_report").append(n.report),l("#nunil_trigger_clustering").prop("disabled",!1),d("once")):(l("div#nunil_tools_operation_report").append(u(!0)+r("Error in clustering scripts.","no-unsafe-inline")+"<br>"),l("#nunil_trigger_clustering").prop("disabled",!1)),l("#nunil_tools_operation_report").animate({scrollTop:l("#nunil_tools_operation_report").prop("scrollHeight")},1e3)},type:"post",url:nunil_object.ajax_url})}),l("#nunil_test_classifier").on("click",function(n){var e=l("#test_clussifier_nonce").val();n.preventDefault(),l("#nunil_test_classifier").prop("disabled",!0),l.ajax({beforeSend:function(){l("#nunil-spinner-blocks").removeClass("hidden")},complete:function(){l("#nunil-spinner-blocks").addClass("hidden")},data:{action:"nunil_test_classifier",nonce:e},dataType:"json",success:function(n){"success"===n.type?l("div#nunil_tools_operation_report").append(n.report):l("div#nunil_tools_operation_report").append(u(!0)+r("Error in test classifier scripts.","no-unsafe-inline")+"<br>"),l("#nunil_test_classifier").prop("disabled",!1),l("#nunil_tools_operation_report").animate({scrollTop:l("#nunil_tools_operation_report").prop("scrollHeight")},1e3)},type:"post",url:nunil_object.ajax_url})}),l("#nunil_clean_database").on("click",function(n){var e=l("#clean_db_nonce").val();if(!window.confirm(r("Are you sure you want to clean db data?\n(This will not clear your base rules)","no-unsafe-inline")))return!1;n.preventDefault(),l("#nunil_clean_database").prop("disabled",!0),l.ajax({beforeSend:function(){l("#nunil-spinner-blocks").removeClass("hidden")},complete:function(){l("#nunil-spinner-blocks").addClass("hidden")},data:{action:"nunil_clean_database",nonce:e},dataType:"json",success:function(n){"success"===n.type?(l("div#nunil_tools_operation_report").append(n.report),l("#nunil_clean_database").prop("disabled",!1),d("once")):(l("div#nunil_tools_operation_report").append(u(!0)+r("Error in cleaning tables.","no-unsafe-inline")+"<br>"),l("#nunil_clean_database").prop("disabled",!1)),l("#nunil_tools_operation_report").animate({scrollTop:l("#nunil_tools_operation_report").prop("scrollHeight")},1e3)},type:"post",url:nunil_object.ajax_url})}),l("#nunil_prune_database").on("click",function(n){var e=l("#prune_db_nonce").val();if(!window.confirm(r("Are you sure you want to prune db data?\n(This will reduce cluster size and remove orphans entries from occurences table)","no-unsafe-inline")))return!1;n.preventDefault(),l("#nunil_prune_database").prop("disabled",!0),l.ajax({beforeSend:function(){l("#nunil-spinner-blocks").removeClass("hidden")},complete:function(){l("#nunil-spinner-blocks").addClass("hidden")},data:{action:"nunil_prune_database",nonce:e},dataType:"json",success:function(n){"success"===n.type?(l("div#nunil_tools_operation_report").append(n.report),l("#nunil_prune_database").prop("disabled",!1),d("once")):(l("div#nunil_tools_operation_report").append(u(!0)+r("Error in pruning tables.","no-unsafe-inline")+"<br>"),l("#nunil_prune_database").prop("disabled",!1)),l("#nunil_tools_operation_report").animate({scrollTop:l("#nunil_tools_operation_report").prop("scrollHeight")},1e3)},type:"post",url:nunil_object.ajax_url})}),"no-unsafe-inline"!==t||"tools"!==o&&null!==o&&!1!==o||(l("input#submit").prop("disabled",!0),l("input[type='checkbox'][name='no-unsafe-inline-tools[capture_enabled]']").prop("checked")&&d()),l("input[type='checkbox'][name='no-unsafe-inline-tools[capture_enabled]']").on("change",function(){var n=l(this);l("input#submit").prop("disabled",!1),n.prop("checked")&&d()}),l("input[type='checkbox'][name='no-unsafe-inline-tools[test_policy]']").on("change",function(){var n=l(this);l("input#submit").prop("disabled",!1),n.prop("checked")&&l("input[type='checkbox'][name='no-unsafe-inline-tools[enable_protection]']").prop("checked",!1)}),l("input[type='checkbox'][name='no-unsafe-inline-tools[enable_protection]']").on("change",function(){var n=l(this);l("input#submit").prop("disabled",!1),n.prop("checked")&&l("input[type='checkbox'][name='no-unsafe-inline-tools[test_policy]']").prop("checked",!1)}),"no-unsafe-inline"===t&&"logs"===o&&i.display(),l("#nunil-log-date-filter").on("change",function(){var n=l(this).val();l.ajax({type:"POST",url:nunil_object.ajax_url,data:{action:"nunil_filter_logs",date:n},success:function(n){l("#nunil-logs-table").html(n)}})})});